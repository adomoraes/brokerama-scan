// Este ficheiro define os modelos do nosso banco de dados.

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // Lê a URL do nosso ficheiro .env
}

model User {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  name         String?
  passwordHash String
  createdAt    DateTime @default(now())

  // RELAÇÃO: Um usuário pode ter VÁRIOS scanners
  scanners     Scanner[]
}

model Scanner {
  id            Int      @id @default(autoincrement())
  assetTicker   String   // Ex: "PETR4", "MGLU3"
  conditionType String   // Ex: "PRICE_ABOVE", "VOLUME_BELOW"
  value         Float    // O valor a ser comparado (ex: 45.50)
  createdAt     DateTime @default(now())

  // RELAÇÃO: Este scanner pertence a UM usuário
  owner         User     @relation(fields: [ownerId], references: [id])
  ownerId       Int      // Chave estrangeira para o User
}